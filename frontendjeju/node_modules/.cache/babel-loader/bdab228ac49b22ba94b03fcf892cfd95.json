{"ast":null,"code":"var _jsxFileName = \"/Users/youlee/Desktop/metanet_internship_project/frontendjeju/src/components/Tourlistitem.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, Fragment } from 'react';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport '../assets/css/bootstrap.min.css';\nimport '../assets/css/style.css';\nimport axios from \"axios\";\nimport Pagination from 'react-js-pagination';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Tourlistitem(props) {\n  _s();\n\n  // 현재 페이지 출력 관광지 리스트 \n  const [tourList, setTourList] = useState([{\n    id: '',\n    img: '',\n    source: '',\n    sub_title: '',\n    location: {\n      coordinates: ['', '']\n    }\n  }, {\n    id: '',\n    img: '',\n    source: '',\n    sub_title: '',\n    location: {\n      coordinates: ['', '']\n    }\n  }, {\n    id: '',\n    img: '',\n    source: '',\n    sub_title: '',\n    location: {\n      coordinates: ['', '']\n    }\n  }, {\n    id: '',\n    img: '',\n    source: '',\n    sub_title: '',\n    location: {\n      coordinates: ['', '']\n    }\n  }, {\n    id: '',\n    img: '',\n    source: '',\n    sub_title: '',\n    location: {\n      coordinates: ['', '']\n    }\n  }]);\n  const [listSize, setListSize] = useState(1);\n  const [page, setPage] = useState(Number(sessionStorage.getItem(\"pageSession\")));\n  const mapLoction = []; // 특정 페이지 요청 시 작동하는 함수\n\n  const handlePageChange = nowPage => {\n    getListItem(nowPage);\n    setPage(nowPage);\n    sessionStorage.setItem(\"pageSession\", nowPage);\n  };\n\n  const reqUrl = '/source/searchByCertainColumn';\n  const tourSizeUrl = '/source/searchSize';\n  const elaUrl = '/log/searchKeyword'; // 페이지에 따른 관광지 리스트 요청\n\n  const getListItem = async page => {\n    await axios.get(reqUrl, {\n      params: {\n        search: decodeURI(window.location.search.split('=')[1]),\n        page: page\n      }\n    }).then(res => setTourList(res.data));\n  }; // 검색에 따른 관광지 리스트의 총 길이 요청\n\n\n  const getlistSize = async () => {\n    await axios.get(tourSizeUrl, {\n      params: {\n        search: decodeURI(window.location.search.split('=')[1])\n      }\n    }).then(res => setListSize(res.data));\n  }; // 엘라스틱 서치에 로그 데이터 전송\n\n\n  const insertElastic = async searchKeyword => {\n    await axios.get(elaUrl, {\n      params: {\n        search: searchKeyword,\n        logClass: 'searchLog'\n      }\n    }).then();\n  }; // 처음 렌더링시 한번 실행되는 함수\n\n\n  useEffect(() => {\n    insertElastic(decodeURI(window.location.search.split('=')[1]));\n    getlistSize();\n    getListItem(page);\n  }, []); // 관광지 리스트 렌더링\n\n  const tourlistRender = () => {\n    const result = [];\n\n    for (let i = 0; i < tourList.length; i++) {\n      mapLoction.push(tourList[i].source.replace(/,/g, '@'));\n      mapLoction.push(tourList[i].location.coordinates);\n      result.push(\n      /*#__PURE__*/\n      // 출력 관광지 리스트의 관광지 id을 값으로 상세페이지에 보냄\n      _jsxDEV(\"div\", {\n        class: \"list-item p-4 mb-4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"row g-4 list-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"col-md-4 d-flex align-items-start\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              class: \"img-list\",\n              src: tourList[i].img,\n              onClick: e => window.location.href = \"/jeju/TouristAttractionInfo?tourSpot=\" + tourList[i].id\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"col-md-8 list-info\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                class: \"col-md-10 text-left list-text\",\n                typeof: \"text\",\n                id: \"test\",\n                onClick: e => window.location.href = \"/jeju/TouristAttractionInfo?tourSpot=\" + tourList[i].id,\n                children: tourList[i].source\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 91,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"col-md-2\",\n                id: 'btn' + (i + 1)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 92,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n              className: \"list-hr\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              class: \"list-p\",\n              children: tourList[i].sub_title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this));\n    }\n\n    sessionStorage.setItem(\"attr_arr\", mapLoction);\n\n    if (mapLoction[0] != '') {\n      const mapDiv = document.getElementById(\"TMapApp\");\n\n      if (mapDiv.childElementCount == 0) {\n        const script = document.createElement(\"script\");\n        script.innerHTML = `\n                    var map;\n                    let attr_list = [\"관광지1\",[126.51555, 33.5200],\"관광지2\",[126.50235, 33.5030],\"관광지3\",[126.49235, 33.5030],\"관광지4\",[126.48235, 33.5030]];\n                    attr_list = sessionStorage.getItem(\"attr_arr\");\n                    attr_list = attr_list.split(',');\n                    function initTmap() \n                    {\n                    var lat;\n                    var lng;\n                    \n                    map = new Tmapv2.Map(\"TMapApp\", {\n                        center: new Tmapv2.LatLng(33.4000,126.51555),\n                        width: \"100%\",\n                        height: \"60%\",\n                        zoom:10\n                    });\n                    let cnt = 1;\n                    for(let i = 0; i < attr_list.length;i+=3){\n                        let str=\"\";\n                        let marker;\n                        let title1 = attr_list[i].replace(/@/g, ',');\n                        let label=\"<span style='background-color: #46414E;color:white'>\"+attr_list[i].replace(/@/g, ',')+\"</span>\";\n                        //Marker 객체 생성.\n                        lat = attr_list[i+2];\n                        lng = attr_list[i+1];\n                        marker = new Tmapv2.Marker({\n                            position: new Tmapv2.LatLng(parseFloat(lat), parseFloat(lng)), //Marker의 중심좌표 설정.\n                            title: title1,\n                            label: label\n                        });\n                        marker.setMap(map); //Marker가 표시될 Map 설정.\n                        lat = attr_list[i+2];\n                        lng = attr_list[i+1] + \" \" + lat;\n                        str = '<button class=\"col-md-2 btnImages\" style=\"width:30px; height:30px;\" value=\"'+lng+'\" type=\"button\" onclick=\"center_map(this.value);return false;\"><i class=\"bi bi-geo-alt\"/></button>';\n                        $(\"#btn\"+String(cnt)).html(str);\n                        cnt+=1;\n                        }\n                    }\n                    //onclick function\n                    function center_map(name)\n                    {\n                    let temp = name.split(\" \");\n                    let lonlat =  new Tmapv2.LatLng(parseFloat(temp[1]), parseFloat(temp[0]));\n                    map.setCenter(lonlat);\n                    map.setZoom(12);\n                    }\n                    initTmap();\n                `;\n        script.type = \"text/javascript\";\n        script.async = \"async\";\n        script.id = \"testid\";\n        script.className = \"testid\";\n        document.head.appendChild(script);\n      } else {\n        mapDiv.removeChild(mapDiv.firstChild);\n        const script = document.createElement(\"script\");\n        script.innerHTML = `\n                    var map;\n                    attr_list = [\"관광지1\",[126.51555, 33.5200],\"관광지2\",[126.50235, 33.5030],\"관광지3\",[126.49235, 33.5030],\"관광지4\",[126.48235, 33.5030]];\n                    attr_list = sessionStorage.getItem(\"attr_arr\");\n                    attr_list = attr_list.split(',');\n                    function initTmap() \n                    {\n                    var lat;\n                    var lng;\n\n                    map = new Tmapv2.Map(\"TMapApp\", {\n                        center: new Tmapv2.LatLng(33.4000,126.51555),\n                        width: \"100%\",\n                        height: \"60%\",\n                        zoom:10\n                    });\n                    let cnt = 1;\n                    for(let i = 0; i < attr_list.length;i+=3){\n                        let str=\"\";\n                        let marker;\n                        let title1 = attr_list[i].replace(/@/g, ',');\n                        let label=\"<span style='background-color: #46414E;color:white'>\"+attr_list[i].replace(/@/g, ',')+\"</span>\";\n                        //Marker 객체 생성.\n                        lat = attr_list[i+2];\n                        lng = attr_list[i+1];\n\n                        marker = new Tmapv2.Marker({\n                            position: new Tmapv2.LatLng(Number(lat), Number(lng)), //Marker의 중심좌표 설정.\n                            title: title1,\n                            label: label\n                        });\n                        marker.setMap(map); //Marker가 표시될 Map 설정.\n                        lat = attr_list[i+2];\n                        lng = attr_list[i+1] + \" \" + lat;\n                        str = '<button class=\"col-md-2 btnImages\" style=\"width:30px; height:30px;\" value=\"'+lng+'\" type=\"button\" onclick=\"center_map(this.value);return false;\"><i class=\"bi bi-geo-alt\"/></button>';\n                        $(\"#btn\"+String(cnt)).html(str);\n                        cnt+=1;\n                        }\n                    }\n                    //onclick function\n                    function center_map(name)\n                    {\n                    let temp = name.split(\" \");\n                    let lonlat =  new Tmapv2.LatLng(Number(temp[1]),Number(temp[0]));\n                    map.setCenter(lonlat);\n                    map.setZoom(12);\n                    }\n                    initTmap();\n                `;\n        script.type = \"text/javascript\";\n        script.async = \"async\";\n        script.id = \"testid\";\n        script.className = \"testid\";\n        document.head.appendChild(script);\n      }\n    }\n\n    return result;\n  };\n\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"tab-class wow fadeInUp\",\n      \"data-wow-delay\": \"0.3s\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"tab-content-tourlist\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"tab-1\",\n          class: \"tab-pane fade show p-0 active\",\n          children: tourlistRender()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Pagination, {\n      activePage: page,\n      itemsCountPerPage: 5,\n      totalItemsCount: listSize,\n      pageRangeDisplayed: 5,\n      prevPageText: \"<\",\n      nextPageText: \">\",\n      onChange: handlePageChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 223,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Tourlistitem, \"G7DU1Kno3ptkce2zc1sZUI9y3UM=\");\n\n_c = Tourlistitem;\nexport default Tourlistitem;\n\nvar _c;\n\n$RefreshReg$(_c, \"Tourlistitem\");","map":{"version":3,"sources":["/Users/youlee/Desktop/metanet_internship_project/frontendjeju/src/components/Tourlistitem.js"],"names":["React","useState","useEffect","Fragment","axios","Pagination","Tourlistitem","props","tourList","setTourList","id","img","source","sub_title","location","coordinates","listSize","setListSize","page","setPage","Number","sessionStorage","getItem","mapLoction","handlePageChange","nowPage","getListItem","setItem","reqUrl","tourSizeUrl","elaUrl","get","params","search","decodeURI","window","split","then","res","data","getlistSize","insertElastic","searchKeyword","logClass","tourlistRender","result","i","length","push","replace","e","href","mapDiv","document","getElementById","childElementCount","script","createElement","innerHTML","type","async","className","head","appendChild","removeChild","firstChild"],"mappings":"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","sourcesContent":["import React ,{useState, useEffect, Fragment} from 'react';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport '../assets/css/bootstrap.min.css';\nimport '../assets/css/style.css';\nimport axios from \"axios\";\nimport Pagination from 'react-js-pagination';\n\nfunction Tourlistitem(props) {\n    // 현재 페이지 출력 관광지 리스트 \n    const [tourList, setTourList] = useState([\n        {id:'' ,img:'', source:'', sub_title:'', location:{coordinates:['', '']}}, \n        {id:'' ,img:'', source:'', sub_title:'', location:{coordinates:['', '']}},\n        {id:'' ,img:'', source:'', sub_title:'', location:{coordinates:['', '']}},\n        {id:'' ,img:'', source:'', sub_title:'', location:{coordinates:['', '']}},\n        {id:'' ,img:'', source:'', sub_title:'', location:{coordinates:['', '']}}\n    ])\n\n    const [listSize, setListSize] = useState(1);\n    const [page, setPage] = useState(Number(sessionStorage.getItem(\"pageSession\")));\n\n    const mapLoction = [];\n\n    // 특정 페이지 요청 시 작동하는 함수\n    const handlePageChange = nowPage => {\n        getListItem(nowPage);\n        setPage(nowPage);\n        sessionStorage.setItem(\"pageSession\", nowPage);\n    };\n\n    const reqUrl = '/source/searchByCertainColumn'\n    const tourSizeUrl = '/source/searchSize'\n    const elaUrl = '/log/searchKeyword'\n\n    // 페이지에 따른 관광지 리스트 요청\n    const getListItem = async (page) => {\n        await axios\n            .get(reqUrl, {\n                params: {\n                    search: decodeURI(window.location.search.split('=')[1]),\n                    page: page\n                }\n            })\n            .then((res) => setTourList(res.data));  \n    }\n\n    // 검색에 따른 관광지 리스트의 총 길이 요청\n    const getlistSize = async () => {\n        await axios\n            .get(tourSizeUrl, {\n                params: {\n                    search: decodeURI(window.location.search.split('=')[1])\n                }\n            })\n            .then((res) => setListSize(res.data));  \n    }\n\n    // 엘라스틱 서치에 로그 데이터 전송\n    const insertElastic = async (searchKeyword) => {\n        await axios\n            .get(elaUrl, {\n                params:{\n                    search: searchKeyword,\n                    logClass:'searchLog'\n                }\n            })\n            .then();\n    }\n\n   // 처음 렌더링시 한번 실행되는 함수\n    useEffect(() => {\n        insertElastic(decodeURI(window.location.search.split('=')[1]));\n        getlistSize();\n        getListItem(page);\n    }, [])\n\n    // 관광지 리스트 렌더링\n    const tourlistRender = () => {\n        const result = [];\n        for (let i = 0; i < tourList.length; i++) {\n            mapLoction.push(tourList[i].source.replace(/,/g, '@'));\n            mapLoction.push(tourList[i].location.coordinates)\n            result.push(\n                // 출력 관광지 리스트의 관광지 id을 값으로 상세페이지에 보냄\n                <div class=\"list-item p-4 mb-4\">\n                    <div class=\"row g-4 list-section\">\n                        <div class=\"col-md-4 d-flex align-items-start\">\n                            <img class=\"img-list\" src={tourList[i].img} onClick={(e) => window.location.href = \"/jeju/TouristAttractionInfo?tourSpot=\" + tourList[i].id} />\n                        </div>\n                        <div class=\"col-md-8 list-info\">\n                            <div className='row'>\n                                <h4 class=\"col-md-10 text-left list-text\" typeof='text' id='test' onClick={(e) => window.location.href = \"/jeju/TouristAttractionInfo?tourSpot=\" + tourList[i].id}>{tourList[i].source}</h4>\n                                <p className='col-md-2' id={'btn' + (i+1)}></p>\n                            </div>\n                            <hr className='list-hr'/>\n                            <p class=\"list-p\">{tourList[i].sub_title}</p>\n                        </div>\n                    </div>\n                </div>\n            );}\n        \n        sessionStorage.setItem(\"attr_arr\", mapLoction)\n        if (mapLoction[0] != ''){\n            const mapDiv = document.getElementById(\"TMapApp\");\n            if (mapDiv.childElementCount == 0){\n                const script = document.createElement(\"script\");\n                script.innerHTML = `\n                    var map;\n                    let attr_list = [\"관광지1\",[126.51555, 33.5200],\"관광지2\",[126.50235, 33.5030],\"관광지3\",[126.49235, 33.5030],\"관광지4\",[126.48235, 33.5030]];\n                    attr_list = sessionStorage.getItem(\"attr_arr\");\n                    attr_list = attr_list.split(',');\n                    function initTmap() \n                    {\n                    var lat;\n                    var lng;\n                    \n                    map = new Tmapv2.Map(\"TMapApp\", {\n                        center: new Tmapv2.LatLng(33.4000,126.51555),\n                        width: \"100%\",\n                        height: \"60%\",\n                        zoom:10\n                    });\n                    let cnt = 1;\n                    for(let i = 0; i < attr_list.length;i+=3){\n                        let str=\"\";\n                        let marker;\n                        let title1 = attr_list[i].replace(/@/g, ',');\n                        let label=\"<span style='background-color: #46414E;color:white'>\"+attr_list[i].replace(/@/g, ',')+\"</span>\";\n                        //Marker 객체 생성.\n                        lat = attr_list[i+2];\n                        lng = attr_list[i+1];\n                        marker = new Tmapv2.Marker({\n                            position: new Tmapv2.LatLng(parseFloat(lat), parseFloat(lng)), //Marker의 중심좌표 설정.\n                            title: title1,\n                            label: label\n                        });\n                        marker.setMap(map); //Marker가 표시될 Map 설정.\n                        lat = attr_list[i+2];\n                        lng = attr_list[i+1] + \" \" + lat;\n                        str = '<button class=\"col-md-2 btnImages\" style=\"width:30px; height:30px;\" value=\"'+lng+'\" type=\"button\" onclick=\"center_map(this.value);return false;\"><i class=\"bi bi-geo-alt\"/></button>';\n                        $(\"#btn\"+String(cnt)).html(str);\n                        cnt+=1;\n                        }\n                    }\n                    //onclick function\n                    function center_map(name)\n                    {\n                    let temp = name.split(\" \");\n                    let lonlat =  new Tmapv2.LatLng(parseFloat(temp[1]), parseFloat(temp[0]));\n                    map.setCenter(lonlat);\n                    map.setZoom(12);\n                    }\n                    initTmap();\n                `;\n                script.type = \"text/javascript\";\n                script.async = \"async\";\n                script.id = \"testid\";\n                script.className = \"testid\";\n                document.head.appendChild(script);\n            }\n            else{\n                mapDiv.removeChild(mapDiv.firstChild);\n                const script = document.createElement(\"script\");\n                script.innerHTML = `\n                    var map;\n                    attr_list = [\"관광지1\",[126.51555, 33.5200],\"관광지2\",[126.50235, 33.5030],\"관광지3\",[126.49235, 33.5030],\"관광지4\",[126.48235, 33.5030]];\n                    attr_list = sessionStorage.getItem(\"attr_arr\");\n                    attr_list = attr_list.split(',');\n                    function initTmap() \n                    {\n                    var lat;\n                    var lng;\n\n                    map = new Tmapv2.Map(\"TMapApp\", {\n                        center: new Tmapv2.LatLng(33.4000,126.51555),\n                        width: \"100%\",\n                        height: \"60%\",\n                        zoom:10\n                    });\n                    let cnt = 1;\n                    for(let i = 0; i < attr_list.length;i+=3){\n                        let str=\"\";\n                        let marker;\n                        let title1 = attr_list[i].replace(/@/g, ',');\n                        let label=\"<span style='background-color: #46414E;color:white'>\"+attr_list[i].replace(/@/g, ',')+\"</span>\";\n                        //Marker 객체 생성.\n                        lat = attr_list[i+2];\n                        lng = attr_list[i+1];\n\n                        marker = new Tmapv2.Marker({\n                            position: new Tmapv2.LatLng(Number(lat), Number(lng)), //Marker의 중심좌표 설정.\n                            title: title1,\n                            label: label\n                        });\n                        marker.setMap(map); //Marker가 표시될 Map 설정.\n                        lat = attr_list[i+2];\n                        lng = attr_list[i+1] + \" \" + lat;\n                        str = '<button class=\"col-md-2 btnImages\" style=\"width:30px; height:30px;\" value=\"'+lng+'\" type=\"button\" onclick=\"center_map(this.value);return false;\"><i class=\"bi bi-geo-alt\"/></button>';\n                        $(\"#btn\"+String(cnt)).html(str);\n                        cnt+=1;\n                        }\n                    }\n                    //onclick function\n                    function center_map(name)\n                    {\n                    let temp = name.split(\" \");\n                    let lonlat =  new Tmapv2.LatLng(Number(temp[1]),Number(temp[0]));\n                    map.setCenter(lonlat);\n                    map.setZoom(12);\n                    }\n                    initTmap();\n                `;\n                script.type = \"text/javascript\";\n                script.async = \"async\";\n                script.id = \"testid\";\n                script.className = \"testid\";\n                document.head.appendChild(script);\n            }\n        }\n        return result;\n    };\n\n    return (\n        <Fragment>\n            {/* <h1 class=\"text-center mb-5 wow fadeInUp\" data-wow-delay=\"0.1s\">관광지 리스트</h1> */}\n            <div class=\"tab-class wow fadeInUp\" data-wow-delay=\"0.3s\">\n                <div class=\"tab-content-tourlist\">\n                    <div id=\"tab-1\" class=\"tab-pane fade show p-0 active\">\n                        {tourlistRender()}\n                    </div>\n                </div>\n            </div>\n            <Pagination\n                    activePage={page}\n                    itemsCountPerPage={5}\n                    totalItemsCount={listSize}\n                    pageRangeDisplayed={5}\n                    prevPageText=\"<\"\n                    nextPageText=\">\"\n                    onChange={handlePageChange}\n            />\n        </Fragment>\n    );\n}\n\nexport default Tourlistitem;"]},"metadata":{},"sourceType":"module"}