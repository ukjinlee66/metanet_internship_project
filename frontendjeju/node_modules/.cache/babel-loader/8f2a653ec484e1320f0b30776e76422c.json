{"ast":null,"code":"var _jsxFileName = \"/Users/youlee/Desktop/metanet_internship_project/frontendjeju/src/components/TourlistitemReco.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, Fragment } from 'react';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport '../assets/css/bootstrap.min.css';\nimport '../assets/css/style.css';\nimport axios from \"axios\";\nimport Pagination from 'react-js-pagination';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction TourlistitemReco(props) {\n  _s();\n\n  // 현재 페이지 출력 관광지 리스트 \n  const [tourList, setTourList] = useState([{\n    id: '',\n    img: '',\n    source: '',\n    sub_title: '',\n    location: {\n      coordinates: ['', '']\n    }\n  }, {\n    id: '',\n    img: '',\n    source: '',\n    sub_title: '',\n    location: {\n      coordinates: ['', '']\n    }\n  }, {\n    id: '',\n    img: '',\n    source: '',\n    sub_title: '',\n    location: {\n      coordinates: ['', '']\n    }\n  }, {\n    id: '',\n    img: '',\n    source: '',\n    sub_title: '',\n    location: {\n      coordinates: ['', '']\n    }\n  }, {\n    id: '',\n    img: '',\n    source: '',\n    sub_title: '',\n    location: {\n      coordinates: ['', '']\n    }\n  }]);\n  const [page, setPage] = useState(1);\n  const mapLoction = []; // 페이지에 따른 관광지 리스트 요청\n\n  const handlePageChange = nowPage => {\n    getListItemReco(nowPage);\n    setPage(nowPage);\n  };\n\n  const reqUrl = '/recommend/relation'; // 키워드 기준 추천된 관광지 리스트 요청\n\n  const getListItemReco = async userInput => {\n    await axios.get(reqUrl, {\n      params: {\n        sentence: userInput\n      }\n    }).then(res => setTourList(res.data));\n  }; // 처음 렌더링시 한번 실행되는 함수\n\n\n  useEffect(() => {\n    getListItemReco(window.sessionStorage.getItem('recoKeyword'));\n  }, []); // 관광지 리스트 렌더링\n\n  const tourlistRender = () => {\n    const result = [];\n    console.log(tourList);\n\n    for (let i = 0; i < tourList.length; i++) {\n      mapLoction.push(tourList[i].source);\n      mapLoction.push(tourList[i].location.coordinates);\n      result.push(\n      /*#__PURE__*/\n      // 출력 관광지 리스트의 관광지 명을 값으로 상세페이지에 보냄\n      _jsxDEV(\"div\", {\n        class: \"list-item p-4 mb-4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"row g-4 list-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"col-md-4 d-flex align-items-start\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              class: \"img-list\",\n              src: tourList[i].img,\n              onClick: e => window.location.href = \"/jeju/TouristAttractionInfo?tourSpot=\" + tourList[i].id\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 58,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"col-md-8 list-info\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                class: \"col-md-10 text-left list-text\",\n                typeof: \"text\",\n                id: \"test\",\n                onClick: e => window.location.href = \"/jeju/TouristAttractionInfo?tourSpot=\" + tourList[i].id,\n                children: tourList[i].source\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 62,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"col-md-2\",\n                id: 'btn' + (i + 1)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 63,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 61,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n              className: \"list-hr\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              class: \"list-p\",\n              children: tourList[i].sub_title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 66,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 17\n      }, this));\n    }\n\n    sessionStorage.setItem(\"attr_arr\", mapLoction);\n\n    if (mapLoction[0] != '') {\n      const mapDiv = document.getElementById(\"TMapApp\");\n\n      if (mapDiv.childElementCount == null || mapDiv.childElementCount == 0) {\n        const script = document.createElement(\"script\");\n        script.innerHTML = `\n                    var map;\n                    let attr_list = [\"관광지1\",[126.51555, 33.5200],\"관광지2\",[126.50235, 33.5030],\"관광지3\",[126.49235, 33.5030],\"관광지4\",[126.48235, 33.5030]];\n                    attr_list = sessionStorage.getItem(\"attr_arr\");\n                    attr_list = attr_list.split(',');\n                    function initTmap() \n                    {\n                    var lat;\n                    var lng;\n                    console.log(\"initmap\");\n                    console.log(attr_list);\n                    map = new Tmapv2.Map(\"TMapApp\", {\n                        center: new Tmapv2.LatLng(33.4000,126.51555),\n                        width: \"100%\",\n                        height: \"60%\",\n                        zoom:10\n                    });\n                    let cnt = 1;\n                    for(let i = 0; i < attr_list.length;i+=3){\n                        let str=\"\";\n                        let marker;\n                        let title1 = attr_list[i];\n                        let label=\"<span style='background-color: #46414E;color:white'>\"+attr_list[i]+\"</span>\";\n                        //Marker 객체 생성.\n                        lat = attr_list[i+2];\n                        lng = attr_list[i+1];\n                        console.log(lat, lng);\n                        marker = new Tmapv2.Marker({\n                            position: new Tmapv2.LatLng(Number(lat), Number(lng)), //Marker의 중심좌표 설정.\n                            title: title1,\n                            label: label\n                        });\n                        marker.setMap(map); //Marker가 표시될 Map 설정.\n                        lat = attr_list[i+2];\n                        lng = attr_list[i+1] + \" \" + lat;\n                        str = '<button class=\"col-md-2 btnImages\" style=\"width:30px; height:30px;\" value=\"'+lng+'\" type=\"button\" onclick=\"center_map(this.value);return false;\"><i class=\"bi bi-geo-alt\"/></button>';\n                        $(\"#btn\"+String(cnt)).html(str);\n                        cnt+=1;\n                        }\n                    }\n                    //onclick function\n                    function center_map(name)\n                    {\n                    console.log(name);\n                    let temp = name.split(\" \");\n                    console.log(temp);\n                    console.log(Number(temp[1]),Number(temp[0]));\n                    let lonlat =  new Tmapv2.LatLng(Number(temp[1]),Number(temp[0]));\n                    map.setCenter(lonlat);\n                    map.setZoom(12);\n                    }\n                    initTmap();\n                `;\n        script.type = \"text/javascript\";\n        script.async = \"async\";\n        script.id = \"testid\";\n        script.className = \"testid\";\n        document.head.appendChild(script);\n      } else {\n        mapDiv.removeChild(mapDiv.firstChild);\n        const script = document.createElement(\"script\");\n        script.innerHTML = `\n                    var map;\n                    attr_list = [\"관광지1\",[126.51555, 33.5200],\"관광지2\",[126.50235, 33.5030],\"관광지3\",[126.49235, 33.5030],\"관광지4\",[126.48235, 33.5030]];\n                    attr_list = sessionStorage.getItem(\"attr_arr\");\n                    attr_list = attr_list.split(',');\n                    function initTmap() \n                    {\n                    var lat;\n                    var lng;\n                    console.log(\"initmap\");\n                    console.log(attr_list);\n                    map = new Tmapv2.Map(\"TMapApp\", {\n                        center: new Tmapv2.LatLng(33.4000,126.51555),\n                        width: \"100%\",\n                        height: \"60%\",\n                        zoom:10\n                    });\n                    let cnt = 1;\n                    for(let i = 0; i < attr_list.length;i+=3){\n                        let str=\"\";\n                        let marker;\n                        let title1 = attr_list[i];\n                        let label=\"<span style='background-color: #46414E;color:white'>\"+attr_list[i]+\"</span>\";\n                        //Marker 객체 생성.\n                        lat = attr_list[i+2];\n                        lng = attr_list[i+1];\n                        console.log(lat, lng);\n                        marker = new Tmapv2.Marker({\n                            position: new Tmapv2.LatLng(Number(lat), Number(lng)), //Marker의 중심좌표 설정.\n                            title: title1,\n                            label: label\n                        });\n                        marker.setMap(map); //Marker가 표시될 Map 설정.\n                        lat = attr_list[i+2];\n                        lng = attr_list[i+1] + \" \" + lat;\n                        str = '<button class=\"col-md-2 btnImages\" style=\"width:30px; height:30px;\" value=\"'+lng+'\" type=\"button\" onclick=\"center_map(this.value);return false;\"><i class=\"bi bi-geo-alt\"/></button>';\n                        $(\"#btn\"+String(cnt)).html(str);\n                        cnt+=1;\n                        }\n                    }\n                    //onclick function\n                    function center_map(name)\n                    {\n                    console.log(name);\n                    let temp = name.split(\" \");\n                    console.log(temp);\n                    console.log(Number(temp[1]),Number(temp[0]));\n                    let lonlat =  new Tmapv2.LatLng(Number(temp[1]),Number(temp[0]));\n                    map.setCenter(lonlat);\n                    map.setZoom(12);\n                    }\n                    initTmap();\n                `;\n        script.type = \"text/javascript\";\n        script.async = \"async\";\n        script.id = \"testid\";\n        script.className = \"testid\";\n        document.head.appendChild(script);\n      }\n    }\n\n    return result;\n  };\n\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"tab-class wow fadeInUp\",\n      \"data-wow-delay\": \"0.3s\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"tab-content-tourlist\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"tab-1\",\n          class: \"tab-pane fade show p-0 active\",\n          children: tourlistRender()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Pagination, {\n      activePage: page,\n      itemsCountPerPage: 5,\n      totalItemsCount: 5,\n      pageRangeDisplayed: 5,\n      prevPageText: \"<\",\n      nextPageText: \">\",\n      onChange: handlePageChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 203,\n    columnNumber: 9\n  }, this);\n}\n\n_s(TourlistitemReco, \"FPBQm2N1N+j8JJKGA1wE3wyKSsA=\");\n\n_c = TourlistitemReco;\nexport default TourlistitemReco;\n\nvar _c;\n\n$RefreshReg$(_c, \"TourlistitemReco\");","map":{"version":3,"sources":["/Users/youlee/Desktop/metanet_internship_project/frontendjeju/src/components/TourlistitemReco.js"],"names":["React","useState","useEffect","Fragment","axios","Pagination","TourlistitemReco","props","tourList","setTourList","id","img","source","sub_title","location","coordinates","page","setPage","mapLoction","handlePageChange","nowPage","getListItemReco","reqUrl","userInput","get","params","sentence","then","res","data","window","sessionStorage","getItem","tourlistRender","result","console","log","i","length","push","e","href","setItem","mapDiv","document","getElementById","childElementCount","script","createElement","innerHTML","type","async","className","head","appendChild","removeChild","firstChild"],"mappings":"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AP,IAA4B,IAA5B,IAAoCH,MAAM,CAACG,iBAAP,IAA4B,CAApE,EAAsE;AAClE,cAAMC,MAAM,GAAGH,QAAQ,CAACI,aAAT,CAAuB,QAAvB,CAAf;AACAD,QAAAA,MAAM,CAACE,SAAP,GAAoB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBApDgB;AAqDAF,QAAAA,MAAM,CAACG,IAAP,GAAc,iBAAd;AACAH,QAAAA,MAAM,CAACI,KAAP,GAAe,OAAf;AACAJ,QAAAA,MAAM,CAACrC,EAAP,GAAY,QAAZ;AACAqC,QAAAA,MAAM,CAACK,SAAP,GAAmB,QAAnB;AACAR,QAAAA,QAAQ,CAACS,IAAT,CAAcC,WAAd,CAA0BP,MAA1B;AACH,OA5DD,MA6DI;AACAJ,QAAAA,MAAM,CAACY,WAAP,CAAmBZ,MAAM,CAACa,UAA1B;AACA,cAAMT,MAAM,GAAGH,QAAQ,CAACI,aAAT,CAAuB,QAAvB,CAAf;AACAD,QAAAA,MAAM,CAACE,SAAP,GAAoB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBApDgB;AAqDAF,QAAAA,MAAM,CAACG,IAAP,GAAc,iBAAd;AACAH,QAAAA,MAAM,CAACI,KAAP,GAAe,OAAf;AACAJ,QAAAA,MAAM,CAACrC,EAAP,GAAY,QAAZ;AACAqC,QAAAA,MAAM,CAACK,SAAP,GAAmB,QAAnB;AACAR,QAAAA,QAAQ,CAACS,IAAT,CAAcC,WAAd,CAA0BP,MAA1B;AACH;AACJ;;AACD,WAAOb,MAAP;AACH,GAzJD;;AA2JA,sBACI,QAAC,QAAD;AAAA,4BAEI;AAAK,MAAA,KAAK,EAAC,wBAAX;AAAoC,wBAAe,MAAnD;AAAA,6BACI;AAAK,QAAA,KAAK,EAAC,sBAAX;AAAA,+BACI;AAAK,UAAA,EAAE,EAAC,OAAR;AAAgB,UAAA,KAAK,EAAC,+BAAtB;AAAA,oBACKD,cAAc;AADnB;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YAFJ,eASI,QAAC,UAAD;AACQ,MAAA,UAAU,EAAEjB,IADpB;AAEQ,MAAA,iBAAiB,EAAE,CAF3B;AAGQ,MAAA,eAAe,EAAE,CAHzB;AAIQ,MAAA,kBAAkB,EAAE,CAJ5B;AAKQ,MAAA,YAAY,EAAC,GALrB;AAMQ,MAAA,YAAY,EAAC,GANrB;AAOQ,MAAA,QAAQ,EAAEG;AAPlB;AAAA;AAAA;AAAA;AAAA,YATJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;AAqBH;;GAvNQb,gB;;KAAAA,gB;AAyNT,eAAeA,gBAAf","sourcesContent":["import React ,{useState, useEffect, Fragment} from 'react';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport '../assets/css/bootstrap.min.css';\nimport '../assets/css/style.css';\nimport axios from \"axios\";\nimport Pagination from 'react-js-pagination';\n\nfunction TourlistitemReco(props) {\n    // 현재 페이지 출력 관광지 리스트 \n    const [tourList, setTourList] = useState([\n        {id:'' ,img:'', source:'', sub_title:'', location:{coordinates:['', '']}}, \n        {id:'' ,img:'', source:'', sub_title:'', location:{coordinates:['', '']}},\n        {id:'' ,img:'', source:'', sub_title:'', location:{coordinates:['', '']}},\n        {id:'' ,img:'', source:'', sub_title:'', location:{coordinates:['', '']}},\n        {id:'' ,img:'', source:'', sub_title:'', location:{coordinates:['', '']}}\n    ])\n\n    const [page, setPage] = useState(1);\n\n    const mapLoction = [];\n\n    // 페이지에 따른 관광지 리스트 요청\n    const handlePageChange = nowPage => {\n        getListItemReco(nowPage);\n        setPage(nowPage);\n    };\n\n    const reqUrl = '/recommend/relation'\n\n    // 키워드 기준 추천된 관광지 리스트 요청\n    const getListItemReco = async (userInput) => {\n        await axios\n            .get(reqUrl, {\n                params: {\n                    sentence: userInput,\n                }\n            })\n            .then((res) => setTourList(res.data));  \n    }\n\n   // 처음 렌더링시 한번 실행되는 함수\n    useEffect(() => {\n        getListItemReco(window.sessionStorage.getItem('recoKeyword'));\n    }, [])\n\n    // 관광지 리스트 렌더링\n    const tourlistRender = () => {\n        const result = [];\n        console.log(tourList);\n        for (let i = 0; i < tourList.length; i++) {\n            mapLoction.push(tourList[i].source);\n            mapLoction.push(tourList[i].location.coordinates);\n            result.push(\n                // 출력 관광지 리스트의 관광지 명을 값으로 상세페이지에 보냄\n                <div class=\"list-item p-4 mb-4\">\n                    <div class=\"row g-4 list-section\">\n                        <div class=\"col-md-4 d-flex align-items-start\">\n                            <img class=\"img-list\" src={tourList[i].img} onClick={(e) => window.location.href = \"/jeju/TouristAttractionInfo?tourSpot=\" + tourList[i].id} />\n                        </div>\n                        <div class=\"col-md-8 list-info\">\n                            <div className='row'>\n                                <h4 class=\"col-md-10 text-left list-text\" typeof='text' id='test' onClick={(e) => window.location.href = \"/jeju/TouristAttractionInfo?tourSpot=\" + tourList[i].id}>{tourList[i].source}</h4>\n                                <p className='col-md-2' id={'btn' + (i+1)}></p>\n                            </div>\n                            <hr className='list-hr'/>\n                            <p class=\"list-p\">{tourList[i].sub_title}</p>\n                        </div>\n                    </div>\n                </div>\n            );}\n        \n        sessionStorage.setItem(\"attr_arr\", mapLoction)\n        if (mapLoction[0] != ''){\n            const mapDiv = document.getElementById(\"TMapApp\");\n            if (mapDiv.childElementCount == null || mapDiv.childElementCount == 0){\n                const script = document.createElement(\"script\");\n                script.innerHTML = `\n                    var map;\n                    let attr_list = [\"관광지1\",[126.51555, 33.5200],\"관광지2\",[126.50235, 33.5030],\"관광지3\",[126.49235, 33.5030],\"관광지4\",[126.48235, 33.5030]];\n                    attr_list = sessionStorage.getItem(\"attr_arr\");\n                    attr_list = attr_list.split(',');\n                    function initTmap() \n                    {\n                    var lat;\n                    var lng;\n                    console.log(\"initmap\");\n                    console.log(attr_list);\n                    map = new Tmapv2.Map(\"TMapApp\", {\n                        center: new Tmapv2.LatLng(33.4000,126.51555),\n                        width: \"100%\",\n                        height: \"60%\",\n                        zoom:10\n                    });\n                    let cnt = 1;\n                    for(let i = 0; i < attr_list.length;i+=3){\n                        let str=\"\";\n                        let marker;\n                        let title1 = attr_list[i];\n                        let label=\"<span style='background-color: #46414E;color:white'>\"+attr_list[i]+\"</span>\";\n                        //Marker 객체 생성.\n                        lat = attr_list[i+2];\n                        lng = attr_list[i+1];\n                        console.log(lat, lng);\n                        marker = new Tmapv2.Marker({\n                            position: new Tmapv2.LatLng(Number(lat), Number(lng)), //Marker의 중심좌표 설정.\n                            title: title1,\n                            label: label\n                        });\n                        marker.setMap(map); //Marker가 표시될 Map 설정.\n                        lat = attr_list[i+2];\n                        lng = attr_list[i+1] + \" \" + lat;\n                        str = '<button class=\"col-md-2 btnImages\" style=\"width:30px; height:30px;\" value=\"'+lng+'\" type=\"button\" onclick=\"center_map(this.value);return false;\"><i class=\"bi bi-geo-alt\"/></button>';\n                        $(\"#btn\"+String(cnt)).html(str);\n                        cnt+=1;\n                        }\n                    }\n                    //onclick function\n                    function center_map(name)\n                    {\n                    console.log(name);\n                    let temp = name.split(\" \");\n                    console.log(temp);\n                    console.log(Number(temp[1]),Number(temp[0]));\n                    let lonlat =  new Tmapv2.LatLng(Number(temp[1]),Number(temp[0]));\n                    map.setCenter(lonlat);\n                    map.setZoom(12);\n                    }\n                    initTmap();\n                `;\n                script.type = \"text/javascript\";\n                script.async = \"async\";\n                script.id = \"testid\";\n                script.className = \"testid\";\n                document.head.appendChild(script);\n            }\n            else{\n                mapDiv.removeChild(mapDiv.firstChild);\n                const script = document.createElement(\"script\");\n                script.innerHTML = `\n                    var map;\n                    attr_list = [\"관광지1\",[126.51555, 33.5200],\"관광지2\",[126.50235, 33.5030],\"관광지3\",[126.49235, 33.5030],\"관광지4\",[126.48235, 33.5030]];\n                    attr_list = sessionStorage.getItem(\"attr_arr\");\n                    attr_list = attr_list.split(',');\n                    function initTmap() \n                    {\n                    var lat;\n                    var lng;\n                    console.log(\"initmap\");\n                    console.log(attr_list);\n                    map = new Tmapv2.Map(\"TMapApp\", {\n                        center: new Tmapv2.LatLng(33.4000,126.51555),\n                        width: \"100%\",\n                        height: \"60%\",\n                        zoom:10\n                    });\n                    let cnt = 1;\n                    for(let i = 0; i < attr_list.length;i+=3){\n                        let str=\"\";\n                        let marker;\n                        let title1 = attr_list[i];\n                        let label=\"<span style='background-color: #46414E;color:white'>\"+attr_list[i]+\"</span>\";\n                        //Marker 객체 생성.\n                        lat = attr_list[i+2];\n                        lng = attr_list[i+1];\n                        console.log(lat, lng);\n                        marker = new Tmapv2.Marker({\n                            position: new Tmapv2.LatLng(Number(lat), Number(lng)), //Marker의 중심좌표 설정.\n                            title: title1,\n                            label: label\n                        });\n                        marker.setMap(map); //Marker가 표시될 Map 설정.\n                        lat = attr_list[i+2];\n                        lng = attr_list[i+1] + \" \" + lat;\n                        str = '<button class=\"col-md-2 btnImages\" style=\"width:30px; height:30px;\" value=\"'+lng+'\" type=\"button\" onclick=\"center_map(this.value);return false;\"><i class=\"bi bi-geo-alt\"/></button>';\n                        $(\"#btn\"+String(cnt)).html(str);\n                        cnt+=1;\n                        }\n                    }\n                    //onclick function\n                    function center_map(name)\n                    {\n                    console.log(name);\n                    let temp = name.split(\" \");\n                    console.log(temp);\n                    console.log(Number(temp[1]),Number(temp[0]));\n                    let lonlat =  new Tmapv2.LatLng(Number(temp[1]),Number(temp[0]));\n                    map.setCenter(lonlat);\n                    map.setZoom(12);\n                    }\n                    initTmap();\n                `;\n                script.type = \"text/javascript\";\n                script.async = \"async\";\n                script.id = \"testid\";\n                script.className = \"testid\";\n                document.head.appendChild(script);\n            }\n        }\n        return result;\n    };\n\n    return (\n        <Fragment>\n            {/* <h1 class=\"text-center mb-5 wow fadeInUp\" data-wow-delay=\"0.1s\">관광지 리스트</h1> */}\n            <div class=\"tab-class wow fadeInUp\" data-wow-delay=\"0.3s\">\n                <div class=\"tab-content-tourlist\">\n                    <div id=\"tab-1\" class=\"tab-pane fade show p-0 active\">\n                        {tourlistRender()}\n                    </div>\n                </div>\n            </div>\n            <Pagination\n                    activePage={page}\n                    itemsCountPerPage={5}\n                    totalItemsCount={5}\n                    pageRangeDisplayed={5}\n                    prevPageText=\"<\"\n                    nextPageText=\">\"\n                    onChange={handlePageChange}\n            />\n        </Fragment>\n    );\n}\n\nexport default TourlistitemReco;"]},"metadata":{},"sourceType":"module"}